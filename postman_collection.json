{
  "info": {
    "name": "Healthcare API",
    "description": "Coleção de requisições para a API de gestão de pacientes e histórico médico",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000"
    },
    {
      "key": "token",
      "value": ""
    },
    {
      "key": "patientId",
      "value": ""
    },
    {
      "key": "medicalHistoryId",
      "value": ""
    },
    {
      "key": "userEmail",
      "value": "user@example.com"
    },
    {
      "key": "userPassword",
      "value": "yourSecurePassword123"
    },
    {
      "key": "userName",
      "value": "Test User"
    }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('token', jsonData.Token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"Email\": \"{{userEmail}}\",\n    \"Password\": \"{{userPassword}}\",\n    \"Name\": \"{{userName}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            }
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('token', jsonData.Token);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"Email\": \"{{userEmail}}\",\n    \"Password\": \"{{userPassword}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          }
        }
      ]
    },
    {
      "name": "Patients",
      "item": [
        {
          "name": "Create Patient",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('patientId', jsonData.Id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"Nome\": \"João Silva\",\n    \"Cpf\": \"529.982.247-25\",\n    \"DataNascimento\": \"1990-05-15\",\n    \"Contato\": \"(11) 99999-9999\",\n    \"Email\": \"joao.silva@email.com\",\n    \"Endereco\": \"Rua das Flores, 123 - São Paulo/SP\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/patients",
              "host": ["{{baseUrl}}"],
              "path": ["api", "patients"]
            }
          }
        },
        {
          "name": "Get All Patients",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/patients?page=1&pageSize=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "patients"],
              "query": [
                {"key": "page", "value": "1"},
                {"key": "pageSize", "value": "10"}
              ]
            }
          }
        },
        {
          "name": "Search Patients by Name",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/patients?nome=João",
              "host": ["{{baseUrl}}"],
              "path": ["api", "patients"],
              "query": [
                {"key": "nome", "value": "João"}
              ]
            }
          }
        },
        {
          "name": "Get Patient by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/patients/{{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "patients", "{{patientId}}"]
            }
          }
        },
        {
          "name": "Get Patient with Medical History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/patients/{{patientId}}/historico",
              "host": ["{{baseUrl}}"],
              "path": ["api", "patients", "{{patientId}}", "historico"]
            }
          }
        },
        {
          "name": "Update Patient",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"Nome\": \"João Silva Santos\",\n    \"DataNascimento\": \"1990-05-15\",\n    \"Contato\": \"(11) 98888-8888\",\n    \"Email\": \"joao.santos@email.com\",\n    \"Endereco\": \"Av. Paulista, 1000 - São Paulo/SP\",\n    \"Ativo\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/patients/{{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "patients", "{{patientId}}"]
            }
          }
        },
        {
          "name": "Delete Patient",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/patients/{{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "patients", "{{patientId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Medical History",
      "item": [
        {
          "name": "Create Medical History",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('medicalHistoryId', jsonData.Id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"PatientId\": \"{{patientId}}\",\n    \"DataConsulta\": \"2024-01-15T10:30:00\",\n    \"Observacoes\": \"Paciente apresentou sintomas gripais\",\n    \"Diagnosticos\": [\n        {\n            \"CodigoCid\": \"J11\",\n            \"Descricao\": \"Influenza (gripe) devido a vírus identificado\",\n            \"DataDiagnostico\": \"2024-01-15\",\n            \"Observacoes\": \"Sintomas leves\"\n        }\n    ],\n    \"Exames\": [\n        {\n            \"Tipo\": \"Laboratorial\",\n            \"Nome\": \"Hemograma Completo\",\n            \"DataRealizacao\": \"2024-01-15\",\n            \"Resultado\": \"Leucócitos: 8.500/mm³ - Normal\",\n            \"Laboratorio\": \"Lab Central\"\n        }\n    ],\n    \"Prescricoes\": [\n        {\n            \"Medicamento\": \"Paracetamol 500mg\",\n            \"Dosagem\": \"500mg\",\n            \"Frequencia\": \"De 6 em 6 horas\",\n            \"DataInicio\": \"2024-01-15\",\n            \"DataFim\": \"2024-01-20\",\n            \"Instrucoes\": \"Tomar em caso de febre acima de 38°C\"\n        }\n    ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/medicalhistory",
              "host": ["{{baseUrl}}"],
              "path": ["api", "medicalhistory"]
            }
          }
        },
        {
          "name": "Get Medical History by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/medicalhistory/{{medicalHistoryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "medicalhistory", "{{medicalHistoryId}}"]
            }
          }
        },
        {
          "name": "Get Medical History by Patient",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/medicalhistory/patient/{{patientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "medicalhistory", "patient", "{{patientId}}"]
            }
          }
        },
        {
          "name": "Delete Medical History",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/medicalhistory/{{medicalHistoryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "medicalhistory", "{{medicalHistoryId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "External Exams",
      "item": [
        {
          "name": "Search External Exams",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/externalexams?cpf=529.982.247-25&dataInicio=2024-01-01&dataFim=2024-12-31",
              "host": ["{{baseUrl}}"],
              "path": ["api", "externalexams"],
              "query": [
                {"key": "cpf", "value": "529.982.247-25"},
                {"key": "dataInicio", "value": "2024-01-01"},
                {"key": "dataFim", "value": "2024-12-31"}
              ]
            }
          }
        }
      ]
    }
  ]
}
